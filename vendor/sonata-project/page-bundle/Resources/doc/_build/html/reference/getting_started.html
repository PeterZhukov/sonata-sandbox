

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Getting Started &mdash; Sonata ~ PageBundle  documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Sonata ~ PageBundle  documentation" href="../index.html"/>
        <link rel="next" title="4. Page Composer" href="page_composer.html"/>
        <link rel="prev" title="2. Installation" href="installation.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> Sonata ~ PageBundle</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#a-site">1.1. A Site</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#a-page">1.2. A Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#a-block">1.3. A Block</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#a-snapshot">1.4. A Snapshot</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#a-cache">1.5. A Cache</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">2. Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#prerequisites">2.1. Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#enable-the-bundle">2.2. Enable the Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#configuration">2.3. Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#extend-the-bundle">2.4. Extend the Bundle</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">3. Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-default-site">3.1. Creating a default site</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-default-pages">3.2. Creating default pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-default-snapshots">3.3. Creating default snapshots</a></li>
<li class="toctree-l2"><a class="reference internal" href="#add-or-edit-a-block">3.4. Add or Edit a Block</a></li>
<li class="toctree-l2"><a class="reference internal" href="#publish-a-snapshot">3.5. Publish a snapshot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="page_composer.html">4. Page Composer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="page_composer.html#configure">4.1. Configure</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_composer.html#javascript">4.2. Javascript</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="multisite.html">5. Multisite</a><ul>
<li class="toctree-l2"><a class="reference internal" href="multisite.html#host-strategy">5.1. Host Strategy</a></li>
<li class="toctree-l2"><a class="reference internal" href="multisite.html#host-by-locale-strategy">5.2. Host By Locale Strategy</a></li>
<li class="toctree-l2"><a class="reference internal" href="multisite.html#host-and-path-strategy">5.3. Host and Path Strategy</a></li>
<li class="toctree-l2"><a class="reference internal" href="multisite.html#host-and-path-by-locale-strategy">5.4. Host and Path By Locale Strategy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="error_pages.html">6. Error Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="twig_helpers.html">7. Twig Helpers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="twig_helpers.html#url">7.1. Url</a></li>
<li class="toctree-l2"><a class="reference internal" href="twig_helpers.html#container">7.2. Container</a></li>
<li class="toctree-l2"><a class="reference internal" href="twig_helpers.html#breadcrumbs">7.3. Breadcrumbs</a></li>
<li class="toctree-l2"><a class="reference internal" href="twig_helpers.html#assets">7.4. Assets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="command_line.html">8. Command Line Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="command_line.html#flush-commands">8.1. Flush commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="command_line.html#page-commands">8.2. Page commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="command_line.html#debug-commands">8.3. Debug Commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced_usage.html">9. Advanced usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="advanced_usage.html#ignore-options">9.1. Ignore options</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced_usage.html#page-default-options">9.2. Page default options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="page_services.html">10. Pages Services</a><ul>
<li class="toctree-l2"><a class="reference internal" href="page_services.html#creating-a-new-page-service">10.1. Creating a new Page Service</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced_configuration.html">11. Advanced Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="varnish.html">12. Varnish</a><ul>
<li class="toctree-l2"><a class="reference internal" href="varnish.html#basic-configuration">12.1. Basic configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="varnish.html#using-esi">12.2. Using ESI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="performance.html">13. Performance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="performance.html#indexes">13.1. Indexes</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance.html#snapshots">13.2. Snapshots</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">14. API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#setup">14.1. Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#serialization">14.2. Serialization</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Sonata ~ PageBundle</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>3. Getting Started</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/reference/getting_started.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="getting-started">
<h1>3. Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<dl class="docutils">
<dt>The bundle works on top of 3 simple models :</dt>
<dd><ul class="first last simple">
<li>a <tt class="docutils literal"><span class="pre">Page</span></tt>: A page is composed of Blocks and contains information about a
page (routing, headers, etc...)</li>
<li>a <tt class="docutils literal"><span class="pre">Block</span></tt>: A block contains information about an area of a page, a block
can have children</li>
<li>a <tt class="docutils literal"><span class="pre">Snapshot</span></tt>: The final representation of a page, the end user always
sees a Snapshot</li>
</ul>
</dd>
</dl>
<div class="section" id="creating-a-default-site">
<h2>3.1. Creating a default site<a class="headerlink" href="#creating-a-default-site" title="Permalink to this headline">¶</a></h2>
<p>First, you need to create a dedicated site, let&#8217;s create a localhost site:</p>
<div class="highlight-bash"><div class="highlight"><pre>php app/console sonata:page:create-site
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-bash"><div class="highlight"><pre>php app/console  sonata:page:create-site --enabled<span class="o">=</span><span class="nb">true</span> --name<span class="o">=</span>localhost --locale<span class="o">=</span>- --host<span class="o">=</span>localhost --relativePath<span class="o">=</span>/ --enabledFrom<span class="o">=</span>now --enabledTo<span class="o">=</span><span class="s2">&quot;+10 years&quot;</span> --default<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
<p>The output might look like this:</p>
<div class="highlight-python"><div class="highlight"><pre>Please define a value for Site.name : localhost
Please define a value for Site.host : localhost
Please define a value for Site.relativePath : /
Please define a value for Site.enabled : true
Please define a value for Site.locale : -
Please define a value for Site.enabledFrom : now
Please define a value for Site.enabledTo : +10 years
Please define a value for Site.default : true

Creating website with the following information :
  name : localhost
  site : http(s)://localhost
  enabled :  Tue, 10 Jan 2012 16:12:08 +0100 =&gt; Mon, 10 Jan 2022 16:12:08 +0100

Confirm site creation ?y

Site created !

You can now create the related pages and snapshots by running the followings commands:
  php app/console sonata:page:update-core-routes --site=42
  php app/console sonata:page:create-snapshots --site=42
</pre></div>
</div>
<p>Note: The following fields must have values specified when creating a site:</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="10%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>string</td>
<td>Friendly name for the site.</td>
</tr>
<tr class="row-odd"><td>host</td>
<td>string</td>
<td>Hostname used to reach the site.</td>
</tr>
<tr class="row-even"><td>relativePath</td>
<td>string</td>
<td>The relative path for the site (only used by the HostPathSiteSelector;
otherwise, just use &#8216;/&#8217;).</td>
</tr>
<tr class="row-odd"><td>enabled</td>
<td>boolean</td>
<td>If the site is enabled or not (true values are &#8216;true&#8217;, 1, &#8216;1&#8217;; all other
values default to false).</td>
</tr>
<tr class="row-even"><td>enabledFrom</td>
<td>DateTime</td>
<td>The Date/Time the site is enabled from (if site is always enabled and has no
start Date/Time, use &#8216;-&#8216; as the value).</td>
</tr>
<tr class="row-odd"><td>enabledTo</td>
<td>DateTime</td>
<td>The Date/Time the site is enabled to (if site is always enabled and has no
end Date/Time, use &#8216;-&#8216; as the value).</td>
</tr>
<tr class="row-even"><td>default</td>
<td>boolean</td>
<td>Only used by the HostPathSiteSelector as the default site if it is unable to
match any other site (true values are &#8216;true&#8217;, 1, &#8216;1&#8217;; all other values
default to false).</td>
</tr>
<tr class="row-odd"><td>locale</td>
<td>string</td>
<td>The default locale for the site (use &#8216;-&#8216; as the value if specifying the
locale is not needed).</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="creating-default-pages">
<h2>3.2. Creating default pages<a class="headerlink" href="#creating-default-pages" title="Permalink to this headline">¶</a></h2>
<p>As the Page bundle can handle symfony actions, actions need to be registered, just run the commands:</p>
<div class="highlight-bash"><div class="highlight"><pre>php app/console sonata:page:update-core-routes --site<span class="o">=</span>all
</pre></div>
</div>
<p>The output might look like this:</p>
<div class="highlight-python"><div class="highlight"><pre>Updating/Creating hybrid pages
--------------------------------------------------------------------------------
UPDATE  homepage                                           /
UPDATE  fos_user_security_login                            /login
UPDATE  fos_user_security_check                            /login_check
UPDATE  fos_user_security_logout                           /logout
UPDATE  fos_user_profile_show                              /profile/
UPDATE  fos_user_profile_edit                              /profile/edit
UPDATE  fos_user_registration_register                     /register/
UPDATE  fos_user_registration_check_email                  /register/check-email
UPDATE  fos_user_registration_confirm                      /register/confirm/{token}
UPDATE  fos_user_registration_confirmed                    /register/confirmed
UPDATE  fos_user_resetting_request                         /resetting/request
UPDATE  fos_user_resetting_send_email                      /resetting/send-email
UPDATE  fos_user_resetting_check_email                     /resetting/check-email
UPDATE  fos_user_resetting_reset                           /resetting/reset/{token}
UPDATE  fos_user_change_password                           /change-password/change-password
UPDATE  sonata_media_gallery_index                         /media/gallery/
UPDATE  sonata_media_gallery_view                          /media/gallery/view/{id}
UPDATE  sonata_media_view                                  /media/view/{id}/{format}
CREATE  sonata_media_download                              /media/download/{id}/{format}
UPDATE  sonata_news_add_comment                            /blog/add-comment/{id}
UPDATE  sonata_news_archive_monthly                        /blog/archive/{year}/{month}.{_format}
UPDATE  sonata_news_tag                                    /blog/tag/{tag}.{_format}
CREATE  sonata_news_category                               /blog/category/{category}.{_format}
UPDATE  sonata_news_archive_yearly                         /blog/archive/{year}.{_format}
UPDATE  sonata_news_archive                                /blog/archive.{_format}
UPDATE  sonata_news_view                                   /blog/{permalink}.{_format}
UPDATE  sonata_news_home                                   /blog/
CREATE  sonata_news_comment_moderation                     /blog/comment/moderation/{commentId}/{hash}/{status}
UPDATE  catchAll                                           /{path}

Some hybrid pages do not exist anymore
--------------------------------------------------------------------------------
ERROR   sonata_news_archive_daily
ERROR   global

  *WARNING* : Pages has been updated however some pages do not exist anymore.
              You must remove them manually.
</pre></div>
</div>
<p>The command will print updated and created pages. The last part of the command
displays outdated actions, so depending on the change some dedicated actions must
be taken.</p>
</div>
<div class="section" id="creating-default-snapshots">
<h2>3.3. Creating default snapshots<a class="headerlink" href="#creating-default-snapshots" title="Permalink to this headline">¶</a></h2>
<p>At this point, no snapshots are available so the end user will get an error. The
following command need to be run:</p>
<div class="highlight-bash"><div class="highlight"><pre>php app/console sonata:page:create-snapshots --site<span class="o">=</span>all
</pre></div>
</div>
<p>The output might look like this:</p>
<div class="highlight-python"><div class="highlight"><pre>001/038 /hello/{name}                                      ... OK !
002/038 /                                                  ... OK !
003/038 /login                                             ... OK !
004/038 /login_check                                       ... OK !
005/038 /logout                                            ... OK !
006/038 /profile/                                          ... OK !
007/038 /profile/edit                                      ... OK !
008/038 /register/                                         ... OK !
009/038 /register/check-email                              ... OK !
010/038 /register/confirm/{token}                          ... OK !
011/038 /register/confirmed                                ... OK !
[...]
035/038 /blog/                                             ... OK !
036/038 /media/download/{id}/{format}                      ... OK !
037/038 /blog/category/{category}.{_format}                ... OK !
038/038 /blog/comment/moderation/{commentId}/{hash}/{status} ... OK !

Enabling snapshots ... OK !
</pre></div>
</div>
<p>The command will take <tt class="docutils literal"><span class="pre">Page</span></tt>s and then create the related <tt class="docutils literal"><span class="pre">Snapshot</span></tt>s. At
this point the front is available for the end user.</p>
</div>
<div class="section" id="add-or-edit-a-block">
<h2>3.4. Add or Edit a Block<a class="headerlink" href="#add-or-edit-a-block" title="Permalink to this headline">¶</a></h2>
<p>Before adding a new block, please look to the default layout
<tt class="docutils literal"><span class="pre">SonataPageBundle::layout.html.twig</span></tt>, it contains different method calls.</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">sonata_page_render_container('content',</span> <span class="pre">page)</span></tt>: render the container
<tt class="docutils literal"><span class="pre">content</span></tt> of the current page</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">sonata_page_render_container('content_bottom',</span> <span class="pre">'global')</span></tt>: render the
container <tt class="docutils literal"><span class="pre">content_bottom</span></tt> of the global page.</p>
<p>A global page does not belong to the current url but it can be used on different pages.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">page_include_stylesheets</span></tt> and <tt class="docutils literal"><span class="pre">page_include_javascripts</span></tt>: insert the
stylesheets and javascripts used on the page by the related blocks.</p>
</li>
</ul>
<p>The block management is done from the front end: a block can be moved and
edited this way:</p>
<ul class="simple">
<li>login into the backend using a valid user</li>
<li>go back to the front,</li>
<li>you should see a black navigation bar</li>
<li>click on &#8216;Show Zone&#8217;</li>
<li>some areas are now available, just double click on an area (a block container)</li>
<li>from the new interface you can add inner blocks and save the bock container.</li>
<li>refresh the front page, you should see the new blocks.</li>
</ul>
<p>To add a new container block, simply render the container with the desired name:</p>
<p><tt class="docutils literal"><span class="pre">sonata_page_render_container('footer_left',</span> <span class="pre">'global')</span></tt></p>
<p>When the SonataPageBundle renders this container, it will automatically insert
a <tt class="docutils literal"><span class="pre">sonata.page.block.container</span></tt> with the name <tt class="docutils literal"><span class="pre">footer_left</span></tt> if it does not exist
yet. You will then be able to add new child blocks to it in the frontend. The
second parameter is the name of the page. It can be either a string, or a
<tt class="docutils literal"><span class="pre">Page</span></tt> instance. In case of a string, it will create a new  page with that name
if it doesn&#8217;t already exist.</p>
</div>
<div class="section" id="publish-a-snapshot">
<h2>3.5. Publish a snapshot<a class="headerlink" href="#publish-a-snapshot" title="Permalink to this headline">¶</a></h2>
<p>The blocks added are not accessible to a non connected user, the blocks are
published trough the <tt class="docutils literal"><span class="pre">Snapshot</span></tt> model. So once the new page is built or
updated and ready to go live, just click on &#8216;Create publication&#8217;.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="page_composer.html" class="btn btn-neutral float-right" title="4. Page Composer"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral" title="2. Installation"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2010-2014, Thomas Rabaix.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>