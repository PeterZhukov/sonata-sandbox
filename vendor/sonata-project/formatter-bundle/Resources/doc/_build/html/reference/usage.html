

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Usage &mdash; Sonata ~ FormatterBundle  documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Sonata ~ FormatterBundle  documentation" href="../index.html"/>
        <link rel="next" title="4. Formatter Widget" href="formatter_widget.html"/>
        <link rel="prev" title="1. Installation" href="installation.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> Sonata ~ FormatterBundle</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">1. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html#configuration">2. Configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">3. Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#form">3.1. Form</a></li>
<li class="toctree-l2"><a class="reference internal" href="#twig-formatter">3.2. Twig Formatter</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="formatter_widget.html">4. Formatter Widget</a><ul>
<li class="toctree-l2"><a class="reference internal" href="formatter_widget.html#preview">4.1. Preview</a></li>
<li class="toctree-l2"><a class="reference internal" href="formatter_widget.html#how-to-use-it">4.2. How to use it ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="formatter_widget.html#dynamic-input">4.3. Dynamic Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="formatter_widget.html#sonata-admin-integration">4.4. Sonata Admin Integration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="formatter_block.html">5. Formatter Block</a><ul>
<li class="toctree-l2"><a class="reference internal" href="formatter_block.html#installation">5.1. Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ckeditor_medias.html">6. Use CKEditor to select medias in SonataMediaBundle</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ckeditor_medias.html#configuration">6.1. Configuration</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Sonata ~ FormatterBundle</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>3. Usage</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/reference/usage.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="usage">
<span id="index-0"></span><h1>3. Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<div class="configuration-block">
<ul class="simple">
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="c1">// Use the service</span>
<span class="nv">$html</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;sonata.formatter.pool&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">transform</span><span class="p">(</span><span class="s1">&#39;markdown&#39;</span><span class="p">,</span> <span class="nv">$text</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><em>Twig</em><div class="highlight-jinja"><div class="highlight"><pre><span class="x"># Template usage</span>
<span class="cp">{{</span> <span class="nv">my_data</span> <span class="o">|</span> <span class="nf">format_text</span><span class="o">(</span><span class="s1">&#39;markdown&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">By default, the <cite>Twig</cite> filter <tt class="docutils literal"><span class="pre">format_text</span></tt> is not marked as <tt class="docutils literal"><span class="pre">safe</span></tt>. So, if you want to ouput the correct result, just add the <tt class="docutils literal"><span class="pre">|</span> <span class="pre">raw</span></tt> filter.</p>
</div>
<div class="section" id="form">
<h2>3.1. Form<a class="headerlink" href="#form" title="Permalink to this headline">¶</a></h2>
<p>The bundle provide a widget to format a text when the form is bound. Just declare 2 fields:</p>
<ul class="simple">
<li><cite>source content</cite> field;</li>
<li><cite>formatter</cite> field.</li>
</ul>
<p>And initialize a form type:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="nv">$formBuilder</span>
    <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;rawContent&#39;</span><span class="p">)</span> <span class="c1">// source content</span>
    <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;contentFormatter&#39;</span><span class="p">,</span> <span class="s1">&#39;sonata_formatter_type&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;source_field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;rawContent&#39;</span><span class="p">,</span>
        <span class="s1">&#39;target_field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;content&#39;</span>
    <span class="p">))</span>
</pre></div>
</div>
<p>When data is populated, the <tt class="docutils literal"><span class="pre">content</span></tt> property will be populated with the text transformed from the selected transformer name and the <tt class="docutils literal"><span class="pre">rawContent</span></tt> property.</p>
<p>For instance, this can be used to pregenerate the content of a markdown blog post.</p>
</div>
<div class="section" id="twig-formatter">
<h2>3.2. Twig Formatter<a class="headerlink" href="#twig-formatter" title="Permalink to this headline">¶</a></h2>
<p><cite>Twig formatter</cite> uses the project&#8217;s <cite>Twig Environment</cite> (registered within service container as <tt class="docutils literal"><span class="pre">twig</span></tt>).
All settings that affect the project&#8217;s <cite>Twig Environment</cite> (like used template loader, enabled extensions etc.) will also affect the <cite>Twig Formatter</cite>.</p>
<p>Also <cite>Twig formatter</cite> cannot have extensions enabled.</p>
<div class="section" id="security-warning">
<h3>3.2.1. Security warning<a class="headerlink" href="#security-warning" title="Permalink to this headline">¶</a></h3>
<p>Since in most cases <cite>Twig Formatter</cite> will be used as the formatter in the administrative interface (like the one shown above with the form), be careful of allowing users to edit the templates, as this could potentially affect the safety of the system. You have to take care of the safety of your templates.
In exceptional cases, you can create a separate instance of <cite>Twig Environment</cite>, register it within service container and override <cite>Twig Formatter</cite> definition passing own secure Twig Environment as a parameter instead of project one.</p>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="formatter_widget.html" class="btn btn-neutral float-right" title="4. Formatter Widget"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral" title="1. Installation"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2010-2014, Thomas Rabaix.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>